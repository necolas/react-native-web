import { Meta, Props, Preview, Story } from '@storybook/addon-docs/blocks';
import * as Stories from './Linking.stories.js';

<Meta title="APIs|Linking" />

# Linking

Linking gives you a general interface for securely opening external URLs from JavaScript.

## Methods

### addEventListener(event, callback)

Adds a event listener for the specified event. The callback will be called when the said event is dispatched.

### removeEventListener(event, callback)

Removes a previously added event listener for the specified event. The callback must be the same object as the one passed to `addEventListener`.

### canOpenURL(url)

Returns a `Promise` that resolves to a boolean indicating whether the app can open the URL.

### getInitialURL()

Returns a `Promise` that resolves to the string of the URL that initially loaded the app.

### openURL(url)

Try to open the given url in a secure fashion. The method returns a `Promise`
object. If the url opens, the promise is resolved. If not, the promise is
rejected.

> On opening URL successfully, dispatches the `onOpen` event.

## Events

### `onOpen`

Dispatched when a call to `Linking.openURL` succeeds. Type signature of the callback is:

```js
(url: string) => void
```

## Example

> Listener added to the`onOpen` event. Check the console for the event log after a URL is opened.

<Preview withSource="none">
  <Story name="openURL">
    <Stories.openURL />
  </Story>
</Preview>
